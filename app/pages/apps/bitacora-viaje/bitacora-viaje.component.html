<h1>Registro Viaje</h1>
<mat-card class="cardWithShadow theme-card">
    <mat-card-content class="b-t-1">
        <form [formGroup]="form" (submit)="onSubmit()">
            <div class="row m-t-20">
                <div class="col-lg-6">
                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput placeholder="Número de Entrega*" formControlName="pIdNumeroEntrega" type="text">
                        <mat-hint *ngIf="f['pIdNumeroEntrega'].touched && f['pIdNumeroEntrega'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pIdNumeroEntrega'].errors">
                                <div *ngIf="f['pIdNumeroEntrega'].errors['required']">
                                    Número de Entrega es Requerido
                                </div>
                                <div *ngIf="f['pIdNumeroEntrega'].errors['pattern']">
                                    No puede ingresar letras
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>


                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput placeholder="Fecha Entrega*" matInput [matDatepicker]="picker" formControlName="pFechaEntrega">
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-hint *ngIf="f['pFechaEntrega'].touched && f['pFechaEntrega'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pFechaEntrega'].errors">
                                <div *ngIf="f['pFechaEntrega'].errors['required']">
                                    Fecha de Entrega es requerido
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput placeholder="Hora de Entrega*" formControlName="pHoraEntrega" type="time">
                        <mat-hint *ngIf="f['pHoraEntrega'].touched && f['pHoraEntrega'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pHoraEntrega'].errors">
                                <div *ngIf="f['pHoraEntrega'].errors['required']">
                                    Hora de Entrega es requerida
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <mat-select placeholder="Seleccione un Departamento" formControlName="pIdDepartamento" (selectionChange)="onOptionSelected($event.value)">
                            <mat-option *ngFor="let opest of departamento" [value]="opest.pidDepartamento">
                                {{ opest.pNombre }}
                            </mat-option>
                        </mat-select>
                        <mat-hint *ngIf="f['pIdDepartamento'].touched && f['pIdDepartamento'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pIdDepartamento'].errors">
                                <div *ngIf="f['pIdDepartamento'].errors['required']">
                                    Selecione un Departamento
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <mat-select placeholder="Seleccione un Municipio" formControlName="pIdMunicipio">
                            <mat-option *ngFor="let opest of municipios" [value]="opest.pidMunicipio">
                                {{ opest.pNombre }}
                            </mat-option>
                        </mat-select>
                        <mat-hint *ngIf="f['pIdMunicipio'].touched && f['pIdMunicipio'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pIdMunicipio'].errors">
                                <div *ngIf="f['pIdMunicipio'].errors['required']">
                                    Selecione un Municipio
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>


                </div>
                <div class="col-lg-6">
                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <mat-select placeholder="Seleccione un Socio" formControlName="pIdSocio" (selectionChange)="onOption($event.value)">
                            <mat-option *ngFor="let opest of Socios" [value]="opest.idSocio">
                                {{ opest.pNombre }}
                            </mat-option>
                        </mat-select>
                        <mat-hint *ngIf="f['pIdSocio'].touched && f['pIdSocio'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pIdSocio'].errors">
                                <div *ngIf="f['pIdSocio'].errors['required']">
                                    Selecione un Socio
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <mat-select placeholder="Seleccione una unidad" formControlName="pIdUnidad">
                            <mat-option *ngFor="let opest of Unidades" [value]="opest.idUnidad">
                                {{ opest.pCodigoUnidad }}
                            </mat-option>
                        </mat-select>
                        <mat-hint *ngIf="f['pIdUnidad'].touched && f['pIdUnidad'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pIdUnidad'].errors">
                                <div *ngIf="f['pIdUnidad'].errors['required']">
                                    Selecione una unidad
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>


                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <mat-select placeholder="Seleccione un Piloto" formControlName="pIdPiloto">
                            <mat-option *ngFor="let opest of Pilotos" [value]="opest.idPiloto">
                                {{ opest.pNombre }}
                            </mat-option>
                        </mat-select>
                        <mat-hint *ngIf="f['pIdPiloto'].touched && f['pIdPiloto'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pIdPiloto'].errors">
                                <div *ngIf="f['pIdPiloto'].errors['required']">
                                    Selecione un Piloto
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <mat-select placeholder="Seleccione un Dia" formControlName="pDiaEntrega">
                            <mat-option value="" disabled>Selecciona un día de la semana</mat-option>
                            <mat-option value="Lunes">Lunes</mat-option>
                            <mat-option value="Martes">Martes</mat-option>
                            <mat-option value="Miércoles">Miércoles</mat-option>
                            <mat-option value="Jueves">Jueves</mat-option>
                            <mat-option value="Viernes">Viernes</mat-option>
                            <mat-option value="Sábado">Sábado</mat-option>
                            <mat-option value="Domingo">Domingo</mat-option>
                        </mat-select>
                        <mat-hint *ngIf="f['pDiaEntrega'].touched && f['pDiaEntrega'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pDiaEntrega'].errors">
                                <div *ngIf="f['pDiaEntrega'].errors['required']">
                                    Selecione un Dia de la Semana
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput placeholder="Producto de Entrega" formControlName="pProductoEntrega" type="text">
                        <mat-hint *ngIf="f['pProductoEntrega'].touched && f['pProductoEntrega'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pProductoEntrega'].errors">
                                <div *ngIf="f['pProductoEntrega'].errors['required']">
                                    Producto es Requerido
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>

                </div>
                <div class="col-lg-12">

                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput placeholder="Lugar de Entrega*" formControlName="pLugarEntrega" type="text">
                        <mat-hint *ngIf="f['pLugarEntrega'].touched && f['pLugarEntrega'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pLugarEntrega'].errors">
                                <div *ngIf="f['pLugarEntrega'].errors['required']">
                                    Lugar de Entrega
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput placeholder="Observaciones" formControlName="pObservaciones" type="text">
                        <mat-hint *ngIf="f['pObservaciones'].touched && f['pObservaciones'].invalid" class="m-b-16 error-msg">
                            <div class="text-error" *ngIf="f['pObservaciones'].errors">
                                <div *ngIf="f['pObservaciones'].errors['required']">
                                    Observaciones
                                </div>
                            </div>
                        </mat-hint>
                    </mat-form-field>



                </div>
            </div>
            <!-- <pre>{{ form.value | json }}</pre> -->
            <mat-card-actions appearance="outline" class="w-100" color="primary">
                <button mat-raised-button color="primary" type="submit" [disabled]="!form.valid">
             Guardar
             </button>
                <button mat-raised-button style="background-color:rgb(0, 255, 140);" type="submit" class="mx-16" (click)="regresar()">
              Regresar
          </button>
            </mat-card-actions>

        </form>
    </mat-card-content>
</mat-card>
